<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Noticias Financieras</title>
  <style>
    body { font-family: sans-serif; margin: 40px; }
    .noticia { border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 8px; }
    button { margin-top: 5px; }
  </style>
  <script>
    const API_URL = "http://127.0.0.1:8000/noticias";

    async function cargarNoticias() {
      const response = await fetch(API_URL);
      const noticias = await response.json();
      const contenedor = document.getElementById("noticias");
      contenedor.innerHTML = "";
      noticias.forEach(n => {
        contenedor.innerHTML += `
          <div class="noticia">
            <h3>${n.titulo}</h3>
            <p>${n.resumen}</p>
            <small>${n.fecha_publicacion}</small><br>
            <button onclick="eliminar(${n.id})">Eliminar</button>
          </div>`;
      });
    }

    async function agregarNoticia() {
      const data = {
        titulo: document.getElementById("titulo").value,
        resumen: document.getElementById("resumen").value,
        contenido: "Contenido de prueba",
        fecha_publicacion: new Date().toISOString().split("T")[0],
        fuente: "Fuente demo",
        empresa: "Empresa demo"
      };
      await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
      cargarNoticias();
    }

    async function eliminar(id) {
      await fetch(`${API_URL}/${id}`, { method: "DELETE" });
      cargarNoticias();
    }

    window.onload = cargarNoticias;
  </script>
</head>
<body>
  <h1>Noticias Financieras</h1>
  <div>
    <input id="titulo" placeholder="TÃ­tulo">
    <input id="resumen" placeholder="Resumen">
    <button onclick="agregarNoticia()">Agregar Noticia</button>
  </div>
  <hr>
  <div id="noticias"></div>
</body>
</html>
